<!DOCTYPE html><html><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="static/style.css">
	<title>Flourish template: Basic slide</title></head>
	<body>
		<div id="wrapper"></div>
	

<script>window.Flourish = {"static_prefix":"static","environment":"live","is_read_only":true};</script><script>!function(t){"use strict";function e(t){if(document.fonts){var e=!t;document.fonts.addEventListener("loadingdone",function(n){e?window.template.update():t(n)})}}function n(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),i="";return i+=parseInt(n[1],16)+",",i+=parseInt(n[2],16)+",",i+=parseInt(n[3],16)+",",i+=Number(e/100)}function i(){var t=this;this.props={hasText:mt.show_title||mt.show_subtitle||mt.show_text,isPhoto:"image"==mt.media_type,editable:mt.editable,text_background:n(mt.text_background_color,mt.text_background_opacity)},this.html=wt.render(bt,{state:mt,props:t.props}),this.stopMedia=function(){setTimeout(function(){t.el.querySelector(".video-container")&&(t.el.querySelector(".video-container").innerHTML="")},500)},this.render=function(){var t=document.createElement("div");t.innerHTML=this.html;for(var e=t.querySelectorAll("a[href]"),n=0;n<e.length;n++)e[n].rel="nofollow";return this.el=t.firstChild,this.el}}function o(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xt&&e.documentElement.namespaceURI===xt?e.createElement(t):e.createElementNS(n,t)}}function r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function a(){}function s(){return[]}function l(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function u(t,e,n,i,o,r){for(var a,s=0,u=e.length,c=r.length;s<c;++s)(a=e[s])?(a.__data__=r[s],i[s]=a):n[s]=new l(t,r[s]);for(;s<u;++s)(a=e[s])&&(o[s]=a)}function c(t,e,n,i,o,r,a){var s,u,c,p={},h=e.length,d=r.length,f=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(f[s]=c=Rt+a.call(u,u.__data__,s,e),c in p?o[s]=u:p[c]=u);for(s=0;s<d;++s)c=Rt+a.call(t,r[s],s,r),(u=p[c])?(i[s]=u,u.__data__=r[s],p[c]=null):n[s]=new l(t,r[s]);for(s=0;s<h;++s)(u=e[s])&&p[f[s]]===u&&(o[s]=u)}function p(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function h(t){return function(){this.removeAttribute(t)}}function d(t){return function(){this.removeAttributeNS(t.space,t.local)}}function f(t,e){return function(){this.setAttribute(t,e)}}function _(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function g(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function m(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function y(t){return function(){this.style.removeProperty(t)}}function v(t,e,n){return function(){this.style.setProperty(t,e,n)}}function w(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function b(t,e){return t.style.getPropertyValue(e)||Gt(t).getComputedStyle(t,null).getPropertyValue(e)}function x(t){return function(){delete this[t]}}function k(t,e){return function(){this[t]=e}}function A(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function S(t){return t.trim().split(/^|\s+/)}function E(t){return t.classList||new C(t)}function C(t){this._node=t,this._names=S(t.getAttribute("class")||"")}function T(t,e){for(var n=E(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function z(t,e){for(var n=E(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function q(t){return function(){T(this,t)}}function B(t){return function(){z(this,t)}}function F(t,e){return function(){(e.apply(this,arguments)?T:z)(this,t)}}function N(){this.textContent=""}function P(t){return function(){this.textContent=t}}function R(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function L(){this.innerHTML=""}function U(t){return function(){this.innerHTML=t}}function I(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function M(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function O(){return null}function V(){var t=this.parentNode;t&&t.removeChild(this)}function j(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function D(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function W(t,e,n){return t=$(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function $(t,e,n){return function(i){var o=ue;ue=i;try{t.call(this,this.__data__,e,n)}finally{ue=o}}}function Q(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function X(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function G(t,e,n){var i=le.hasOwnProperty(t.type)?W:$;return function(o,r,a){var s,l=this.__on,u=i(e,r,a);if(l)for(var c=0,p=l.length;c<p;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function J(t,e,n){var i=Gt(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function K(t,e){return function(){return J(this,t,e)}}function Y(t,e){return function(){return J(this,t,e.apply(this,arguments))}}function Z(t,e){this._groups=t,this._parents=e}function tt(){return new Z([[document.documentElement]],he)}function et(){for(var t=document.querySelectorAll("input[type=url]"),e=0;e<t.length;e++)nt(t[e])}function nt(t){var e=t.ownerDocument,n=e.createElement("button");n.type="button",n.className="upload",n.setAttribute("title","Upload a file from your computer"),n.innerHTML=be,t.insertAdjacentElement("afterend",n),n.onclick=it}function it(){var t=this.previousSibling;Flourish.uploadImage({name:t.getAttribute("data-property"),accept:t.getAttribute("accept")})}function ot(){var t=ve(".slide-container[data-status='new']"),e=t.select("#slide-media"),n=t.select("#slide-content-foreground").append("div").attr("class","btn-container");t.append("button").attr("data-el","main").attr("class","settings-btn icon-columns").attr("data-settings","slide_layout,height_mode,height_ratio,slide_margin,background_color"),e.append("button").attr("data-el","media").attr("class","settings-btn icon-image").attr("data-settings","show_media,media_type,video_url,photo_url,photo_size,photo_position,video_size,video_autoplay,video_controls"),n.append("button").attr("data-el","content").attr("class","settings-btn icon-pen").attr("data-settings","text_background_color,text_background_size,text_background_opacity,text_align,text_color,text_position"),we(".settings-btn").on("click",st).classed("selected",function(){return ve(this).attr("data-el")==fe})}function rt(){de=ve("#wrapper").append("div").attr("id","settings-panel"),de.append("div").attr("id","settings-background"),de.append("div").attr("id","settings-foreground"),ve("#settings-background").on("click",at)}function at(){ve("#settings-panel").classed("visible",!1),ve(".settings-btn.selected").classed("selected",!1),fe=null}function st(){fe=ve(this).attr("data-el"),de.classed("visible",!0),ve(this).classed("selected",!0),de.style("top",0);var t=ue.clientX>window.innerWidth/2?"right":"left",e="right"==t?"left":"right";de.style(e,"auto"),"left"==t?de.style("left",this.getBoundingClientRect().left+this.getBoundingClientRect().width+10+"px"):de.style("right",window.innerWidth-this.getBoundingClientRect().left+10+"px"),lt(this);var n;n=this.getBoundingClientRect().top+de.node().getBoundingClientRect().height>ve(".slide-container").node().getBoundingClientRect().height?window.innerHeight-de.node().getBoundingClientRect().height-10:this.getBoundingClientRect().y,de.style("top",n+"px")}function lt(t){de.select("#settings-foreground").html("");var e=ve(t).attr("data-settings").split(","),n=de.select("#settings-foreground").selectAll(".setting-container").data(e).enter().append("div").attr("class",function(t){var e="setting-container type-"+xe[t].type;return xe[t].width&&(e+=" width-"+xe[t].width),e});n.each(function(t){if(xe[t]){if(xe[t].show_if)if("object"==typeof xe[t].show_if[1]){var e=!1;if(xe[t].show_if[1].forEach(function(n){mt[xe[t].show_if[0]]==n&&(e=!0)}),!e)return!1}else if(mt[xe[t].show_if[0]]!==xe[t].show_if[1])return;if("checkbox"!==xe[t].type&&ve(this).append("p").text(xe[t].name).attr("class","label-title"),"dropdown"==xe[t].type){var n=ve(this).append("select");n.selectAll("option").data(xe[t].options).enter().append("option").attr("value",function(t){return t.id}).attr("selected",function(e){return e.id==mt[t]?"selected":null}).text(function(t){return t.name}),n.on("change",function(t){mt[t]=ue.target.value,Ee(xe[t].type)})}else if("button_group"==xe[t].type){var i=ve(this).append("div").attr("class","button-group");i.selectAll("button").data(xe[t].options).enter().append("button").attr("data-value",function(t){return t.id}).classed("selected",function(e){return e.id===mt[t]}).style("width",100/xe[t].options.length+"%").html(function(t){return t.name.indexOf("icon::")>-1?ut(t.name):t.name}),i.selectAll("button").on("click",function(){var e=this.getAttribute("data-value");"false"==e&&(e=!1),"true"==e&&(e=!0),mt[t]=e,Ee(xe[t].type)})}else if("keypad"==xe[t].type){var o=ve(this).append("div").attr("class","keypad"),r=["top-left","top-center","top-right","center-left","center-center","center-right","bottom-left","bottom-center","bottom-right"].filter(function(e){return"text-overlay"==mt.slide_layout||"photo_position"==t||("text-top"==mt.slide_layout||"text-bottom"==mt.slide_layout?e.split("-")[0]==mt[t+"_v"]:"text-left"==mt.slide_layout||"text-right"==mt.slide_layout?e.split("-")[1]==mt[t+"_h"]:void 0)});o.classed("vertical","text_position"==t&&("text-left"==mt.slide_layout||"text-right"==mt.slide_layout));var a=o.selectAll(".position").data(r).enter().append("p").attr("class",function(t){return"position "+t}).classed("selected",function(e){return mt[t]==e});a.append("input").attr("type","radio").attr("value",function(t){return t}).attr("name",xe[t].name),a.append("label"),a.on("click",function(){mt[t]=ve(this).select("input").node().value,mt[t+"_v"]=mt[t].split("-")[0],mt[t+"_h"]=mt[t].split("-")[1],Ee(xe[t].type)})}else ve(this).append("input").attr("type",function(){return xe[t].type}).attr("value",function(){return mt[t]}).attr("checked",function(){return"checkbox"!==xe[t].type?null:mt[t]?"checked":null}).attr("data-property",function(){return t}).on("change",function(){"checkbox"==xe[t].type?mt[t]=!mt[t]:mt[t]=ue.target.value,Ee(xe[t].type)})}}),n.each(function(t){xe[t]&&"checkbox"==xe[t].type&&ve(this).append("label").text(xe[t].name)}),et()}function ut(t){var e=t.replace("icon::","");return"<img src='"+Flourish.static_prefix+"/"+e+"' />"}function ct(t){ve(".settings-btn.selected").node()&&"color"!=t&&lt(ve(".settings-btn.selected").node()),we(".settings-btn").remove(),ot()}function pt(){rt()}function ht(t){_e?ke?function(){var e=ve(t).selectAll(".no-edit");0!==e.size()&&e.each(function(){var t=new Quill(this,{modules:{toolbar:[["bold","italic","underline"],["link"]],keyboard:{bindings:{tab:{key:9,handler:function(){return!0}}}}},placeholder:"",theme:"bubble"});Quill.import("formats/link").sanitize=function(t){return/^https?:\/\//.test(t)?t:"https://"+t},t.container.classList.remove("no-edit"),t.on("text-change",function(){var e=t.container.getAttribute("data-content");mt[e]=t.container.firstChild.innerHTML,_t()}),ve(this).append("span").attr("class","text-toggle").on("click",function(){var t=this.parentElement.getAttribute("data-content");mt["show_"+t]=!mt["show_"+t],Ee()})})}():_e.onload=function(){ke=!0,ht(t)}:(_e=document.createElement("script"),_e.src=Flourish.static_prefix+"/quill.min.js",_e.id="Quill-script",document.body.appendChild(_e),_e.onload=function(){ke=!0,ht(t)})}function dt(){me!=mt.layout.body_font.name&&(ge||(ge=document.createElement("link"),ge.setAttribute("rel","stylesheet"),ge.id="layout-font",document.head.appendChild(ge)),ge.setAttribute("href",mt.layout.body_font.url),document.body.style.fontFamily=mt.layout.body_font.name||"Source Sans Pro",me=mt.layout.body_font.name)}function ft(){var t=0,e=null,n=Se.querySelector("div[data-status='new']"),i=function(o){e||(e=o);var r=o-e;t=r/500,n.style.opacity=t,r<500&&window.requestAnimationFrame(i)};window.requestAnimationFrame(i)}function _t(){"aspect_ratio"==mt.height_mode?Flourish.setHeight(1*window.innerWidth/mt.height_ratio):Flourish.setHeight(null);var t=Se.querySelector(".slide-container[data-status='new']"),e=t.querySelector("#slide-content"),n=window.getComputedStyle(e),i=e.querySelector("#slide-content-foreground"),o=gt(),r=i.getBoundingClientRect().height,a=parseInt(n.marginTop)+parseInt(n.marginBottom),s=1,l=0;if("text-top"!=mt.slide_layout&&"text-bottom"!=mt.slide_layout||(s=mt.show_media?.5:1,l=1-s),r>o*s)if(Flourish.fixed_height||"aspect_ratio"==mt.height_mode)t.style.overflow="auto";else{var u=o*l,c=u+r+a;Flourish.setHeight(c)}else Flourish.fixed_height||"aspect_ratio"==mt.height_mode?t.style.overflow="":Flourish.setHeight(null)}function gt(){if(Flourish.fixed_height)return window.innerHeight;var t=window.innerWidth;return t>999?650:t>599?575:400}var mt={bgcolor:"#000000",editable:("story_editor"===Flourish.environment||"sdk"===Flourish.environment)&&!Flourish.is_read_only,slide_layout:"text-top",slide_margin:"0px",height_mode:"auto",height_ratio:1.33,show_title:!0,show_subtitle:!0,show_text:!0,show_media:!0,title:"<strong>Title</strong>",subtitle:"Subtitle",text:"Text",show_logo_in_media:!1,logo_url:"",background_color:"#ffffff",text_background_color:"#ffffff",text_background_opacity:80,text_background_size:"full",text_color:"#333333",text_align:"left",text_position:"center-center",text_position_h:"center",text_position_v:"center",media_type:"image",photo_url:"https://storage.googleapis.com/coverr-public/poster/Mt_Baker.jpg",photo_size:"cover",photo_position:"center-center",photo_position_h:"center",photo_position_v:"center",video_url:"https://public.flourish.studio/uploads/9e8af696-efce-44c6-9590-cdc6cfb99003.mp4",video_size:"cover",video_autoplay:!0,video_controls:!1,layout:{body_font:{name:"",url:""}}},yt={},vt="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wt=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(t,n){e&&"string"!=typeof e.nodeName?n(e):(t.Mustache={},n(t.Mustache))}(vt,function(t){function e(t){return"function"==typeof t}function n(t){return _(t)?"array":typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}function r(t,e){return g.call(t,e)}function a(t){return!r(m,t)}function s(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return y[t]})}function l(e,n){function o(t){if("string"==typeof t&&(t=t.split(w,2)),!_(t)||2!==t.length)throw new Error("Invalid tags: "+t);r=new RegExp(i(t[0])+"\\s*"),s=new RegExp("\\s*"+i(t[1])),l=new RegExp("\\s*"+i("}"+t[1]))}if(!e)return[];var r,s,l,h=[],d=[],f=[],g=!1,m=!1;o(n||t.tags);for(var y,A,S,E,C,T,z=new p(e);!z.eos();){if(y=z.pos,S=z.scanUntil(r))for(var q=0,B=S.length;q<B;++q)E=S.charAt(q),a(E)?f.push(d.length):m=!0,d.push(["text",E,y,y+1]),y+=1,"\n"===E&&function(){if(g&&!m)for(;f.length;)delete d[f.pop()];else f=[];g=!1,m=!1}();if(!z.scan(r))break;if(g=!0,A=z.scan(k)||"name",z.scan(v),"="===A?(S=z.scanUntil(b),z.scan(b),z.scanUntil(s)):"{"===A?(S=z.scanUntil(l),z.scan(x),z.scanUntil(s),A="&"):S=z.scanUntil(s),!z.scan(s))throw new Error("Unclosed tag at "+z.pos);if(C=[A,S,y,z.pos],d.push(C),"#"===A||"^"===A)h.push(C);else if("/"===A){if(!(T=h.pop()))throw new Error('Unopened section "'+S+'" at '+y);if(T[1]!==S)throw new Error('Unclosed section "'+T[1]+'" at '+y)}else"name"===A||"{"===A||"&"===A?m=!0:"="===A&&o(S)}if(T=h.pop())throw new Error('Unclosed section "'+T[1]+'" at '+z.pos);return c(u(d))}function u(t){for(var e,n,i=[],o=0,r=t.length;o<r;++o)(e=t[o])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}function c(t){for(var e,n,i=[],o=i,r=[],a=0,s=t.length;a<s;++a)switch(e=t[a],e[0]){case"#":case"^":o.push(e),r.push(e),o=e[4]=[];break;case"/":n=r.pop(),n[5]=e[2],o=r.length>0?r[r.length-1][4]:i;break;default:o.push(e)}return i}function p(t){this.string=t,this.tail=t,this.pos=0}function h(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function d(){this.cache={}}var f=Object.prototype.toString,_=Array.isArray||function(t){return"[object Array]"===f.call(t)},g=RegExp.prototype.test,m=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},v=/\s*/,w=/\s+/,b=/\s*=/,x=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;p.prototype.eos=function(){return""===this.tail},p.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},p.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},h.prototype.push=function(t){return new h(t,this)},h.prototype.lookup=function(t){var n,i=this.cache;if(i.hasOwnProperty(t))n=i[t];else{for(var r,a,s=this,l=!1;s;){if(t.indexOf(".")>0)for(n=s.view,r=t.split("."),a=0;null!=n&&a<r.length;)a===r.length-1&&(l=o(n,r[a])),n=n[r[a++]];else n=s.view[t],l=o(s.view,t);if(l)break;s=s.parent}i[t]=n}return e(n)&&(n=n.call(this.view)),n},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(t,e){var n=this.cache,i=n[t];return null==i&&(i=n[t]=l(t,e)),i},d.prototype.render=function(t,e,n){var i=this.parse(t),o=e instanceof h?e:new h(e);return this.renderTokens(i,o,n,t)},d.prototype.renderTokens=function(t,e,n,i){for(var o,r,a,s="",l=0,u=t.length;l<u;++l)a=void 0,o=t[l],r=o[0],"#"===r?a=this.renderSection(o,e,n,i):"^"===r?a=this.renderInverted(o,e,n,i):">"===r?a=this.renderPartial(o,e,n,i):"&"===r?a=this.unescapedValue(o,e):"name"===r?a=this.escapedValue(o,e):"text"===r&&(a=this.rawValue(o)),void 0!==a&&(s+=a);return s},d.prototype.renderSection=function(t,n,i,o){function r(t){return a.render(t,n,i)}var a=this,s="",l=n.lookup(t[1]);if(l){if(_(l))for(var u=0,c=l.length;u<c;++u)s+=this.renderTokens(t[4],n.push(l[u]),i,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(t[4],n.push(l),i,o);else if(e(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,o.slice(t[3],t[5]),r),null!=l&&(s+=l)}else s+=this.renderTokens(t[4],n,i,o);return s}},d.prototype.renderInverted=function(t,e,n,i){var o=e.lookup(t[1]);if(!o||_(o)&&0===o.length)return this.renderTokens(t[4],e,n,i)},d.prototype.renderPartial=function(t,n,i){if(i){var o=e(i)?i(t[1]):i[t[1]];return null!=o?this.renderTokens(this.parse(o),n,i,o):void 0}},d.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},d.prototype.escapedValue=function(e,n){var i=n.lookup(e[1]);if(null!=i)return t.escape(i)},d.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.2",t.tags=["{{","}}"];var A=new d;return t.clearCache=function(){return A.clearCache()},t.parse=function(t,e){return A.parse(t,e)},t.render=function(t,e,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+n(t)+'" was given as the first argument for mustache#render(template, view, partials)');return A.render(t,e,i)},t.to_html=function(n,i,o,r){var a=t.render(n,i,o);if(!e(r))return a;r(a)},t.escape=s,t.Scanner=p,t.Context=h,t.Writer=d,t})}),bt='<div class="slide-container theme-{{state.slide_layout}} text-horizontal-{{state.text_position_h}} text-vertical-{{state.text_position_v}}" data-status="new" style="opacity:0; background-color: {{ state.background_color }}; padding: {{ state.slide_margin }}">\n\t<div id="slide-media">\n\t\t{{#state.show_media}}\n\t\t\t{{# props.isPhoto}}\n\t\t\t\t<div id="slide-media-photo" class="size-{{state.photo_size}}" style="background-image: url(\'{{state.photo_url}}\'); background-size: {{state.photo_size}}; background-position: {{state.photo_position_h}} {{state.photo_position_v}};"></div>\n\t\t\t{{/ props.isPhoto}}\n\t\t\t{{^ props.isPhoto}}\n\t\t\t\t<div class="slide-media-video size-{{state.video_size}}">\n\t\t\t\t\t<video src="{{state.video_url}}" playsinline loop{{#state.video_autoplay}} muted autoplay="true" {{/state.video_autoplay}}{{#state.video_controls}} controls {{/state.video_controls}}></video>\n\t\t\t\t</div> \n\t\t\t{{/ props.isPhoto}}\n\t\t\t{{#state.show_logo_in_media}}\n\t\t\t\t<img id="slide-media-logo" src="{{state.logo_url}}">\n\t\t\t{{/state.show_logo_in_media}}\n\t\t{{/state.show_media}}\n\t</div>\n\t<div id="slide-content" style="color: {{state.text_color}}; text-align: {{state.text_align}};" class="align-v-{{state.text_position_v}} align-h-{{state.text_position_h}} {{^props.hasText}}invisible{{/props.hasText}}">\n\t\t<div id="slide-content-background" class="size-{{state.text_background_size}}" style="background-color:rgba({{props.text_background}});"></div>\n\t\t<div id="slide-content-foreground">\n\t\t\t<h1 data-content="title" class="{{# props.editable}}no-edit editable{{/ props.editable}}{{^ props.editable}}{{/ props.editable}}{{^state.show_title}} invisible{{/state.show_title}}"><span>{{{state.title}}}</span></h1>\n\t\t\t<h2 data-content="subtitle" class="{{# props.editable}}no-edit editable{{/ props.editable}}{{^ props.editable}}{{/ props.editable}}{{^state.show_subtitle}} invisible{{/state.show_subtitle}}"><span>{{{state.subtitle}}}</span></h2>\n\t\t\t<div id="body-text" data-content="text" class="{{# props.editable}}no-edit editable{{/ props.editable}}{{^ props.editable}}{{/ props.editable}}{{^state.show_text}} invisible{{/state.show_text}}">{{{state.text}}}</div>\n\t\t</div>\n\t</div>\n</div>',xt="http://www.w3.org/1999/xhtml",kt={svg:"http://www.w3.org/2000/svg",xhtml:xt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},At=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),kt.hasOwnProperty(e)?{space:kt[e],local:t}:t},St=function(t){var e=At(t);return(e.local?r:o)(e)},Et=function(t){return null==t?a:function(){return this.querySelector(t)}},Ct=function(t){"function"!=typeof t&&(t=Et(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,a,s=e[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(r=s[c])&&(a=t.call(r,r.__data__,c,s))&&("__data__"in r&&(a.__data__=r.__data__),u[c]=a);return new Z(i,this._parents)},Tt=function(t){return null==t?s:function(){return this.querySelectorAll(t)}},zt=function(t){"function"!=typeof t&&(t=Tt(t));for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var a,s=e[r],l=s.length,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),o.push(a));return new Z(i,o)},qt=function(t){return function(){return this.matches(t)}},Bt=function(t){"function"!=typeof t&&(t=qt(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,a=e[o],s=a.length,l=i[o]=[],u=0;u<s;++u)(r=a[u])&&t.call(r,r.__data__,u,a)&&l.push(r);return new Z(i,this._parents)},Ft=function(t){return new Array(t.length)},Nt=function(){return new Z(this._enter||this._groups.map(Ft),this._parents)};l.prototype={constructor:l,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Pt=function(t){return function(){return t}},Rt="$",Lt=function(t,e){if(!t)return _=new Array(this.size()),p=-1,this.each(function(t){_[++p]=t}),_;var n=e?c:u,i=this._parents,o=this._groups;"function"!=typeof t&&(t=Pt(t));for(var r=o.length,a=new Array(r),s=new Array(r),l=new Array(r),p=0;p<r;++p){var h=i[p],d=o[p],f=d.length,_=t.call(h,h&&h.__data__,p,i),g=_.length,m=s[p]=new Array(g),y=a[p]=new Array(g);n(h,d,m,y,l[p]=new Array(f),_,e);for(var v,w,b=0,x=0;b<g;++b)if(v=m[b]){for(b>=x&&(x=b+1);!(w=y[x])&&++x<g;);v._next=w||null}}return a=new Z(a,i),a._enter=s,a._exit=l,a},Ut=function(){return new Z(this._exit||this._groups.map(Ft),this._parents)},It=function(t,e,n){var i=this.enter(),o=this,r=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(o=e(o)),null==n?r.remove():n(r),i&&o?i.merge(o).order():o},Mt=function(t){for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),a=new Array(i),s=0;s<r;++s)for(var l,u=e[s],c=n[s],p=u.length,h=a[s]=new Array(p),d=0;d<p;++d)(l=u[d]||c[d])&&(h[d]=l);for(;s<i;++s)a[s]=e[s];return new Z(a,this._parents)},Ht=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,a=o[r];--r>=0;)(i=o[r])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},Ot=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=p);for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var a,s=n[r],l=s.length,u=o[r]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new Z(o,this._parents).order()},Vt=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},jt=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Dt=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var a=i[o];if(a)return a}return null},Wt=function(){var t=0;return this.each(function(){++t}),t},$t=function(){return!this.node()},Qt=function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],a=0,s=r.length;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this},Xt=function(t,e){var n=At(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?d:h:"function"==typeof e?n.local?m:g:n.local?_:f)(n,e))},Gt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Jt=function(t,e,n){return arguments.length>1?this.each((null==e?y:"function"==typeof e?w:v)(t,e,null==n?"":n)):b(this.node(),t)},Kt=function(t,e){return arguments.length>1?this.each((null==e?x:"function"==typeof e?A:k)(t,e)):this.node()[t]};C.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Yt=function(t,e){var n=S(t+"");if(arguments.length<2){for(var i=E(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?F:e?q:B)(n,e))},Zt=function(t){return arguments.length?this.each(null==t?N:("function"==typeof t?R:P)(t)):this.node().textContent},te=function(t){return arguments.length?this.each(null==t?L:("function"==typeof t?I:U)(t)):this.node().innerHTML},ee=function(){return this.each(M)},ne=function(){return this.each(H)},ie=function(t){var e="function"==typeof t?t:St(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},oe=function(t,e){var n="function"==typeof t?t:St(t),i=null==e?O:"function"==typeof e?e:Et(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},re=function(){return this.each(V)},ae=function(t){return this.select(t?D:j)},se=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},le={},ue=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(le={mouseenter:"mouseover",mouseleave:"mouseout"})}var ce=function(t,e,n){var i,o,r=Q(t+""),a=r.length;{if(!(arguments.length<2)){for(s=e?G:X,null==n&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}},pe=function(t,e){return this.each(("function"==typeof e?Y:K)(t,e))},he=[null];Z.prototype=tt.prototype={constructor:Z,select:Ct,selectAll:zt,filter:Bt,data:Lt,enter:Nt,exit:Ut,join:It,merge:Mt,order:Ht,sort:Ot,call:Vt,nodes:jt,node:Dt,size:Wt,empty:$t,each:Qt,attr:Xt,style:Jt,property:Kt,classed:Yt,text:Zt,html:te,raise:ee,lower:ne,append:ie,insert:oe,remove:re,clone:ae,datum:se,on:ce,dispatch:pe};var de,fe,_e,ge,me,ye,ve=function(t){return"string"==typeof t?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],he)},we=function(t){return"string"==typeof t?new Z([document.querySelectorAll(t)],[document.documentElement]):new Z([null==t?[]:t],he)},be="⬆︎",xe={show_title:{type:"checkbox",name:"Show title"},show_subtitle:{type:"checkbox",name:"Show subtitle"},show_text:{type:"checkbox",name:"Show text"},show_media:{type:"checkbox",name:"Show media"},background_color:{type:"color",name:"Background color",show_if:["slide_layout",["text-top","text-bottom","text-left","text-right"]],width:"half"},slide_margin:{type:"string",name:"Slide margin",width:"half"},slide_layout:{type:"button_group",name:"Layout",options:[{id:"text-top",name:"icon::icon_text-top.png"},{id:"text-bottom",name:"icon::icon_text-bottom.png"},{id:"text-left",name:"icon::icon_text-left.png"},{id:"text-right",name:"icon::icon_text-right.png"},{id:"text-overlay",name:"icon::icon_text-overlay.png"}]},height_mode:{type:"button_group",name:"Height mode",options:[{id:"auto",name:"Auto"},{id:"aspect_ratio",name:"Aspect Ratio"}]},height_ratio:{type:"number",name:"Aspect ratio",width:"half",show_if:["height_mode","aspect_ratio"]},media_type:{type:"button_group",name:"Media type",options:[{id:"video",name:"Video"},{id:"image",name:"Image"}]},video_url:{type:"url",name:"Video URL",show_if:["media_type","video"]},photo_url:{type:"url",name:"Photo URL",show_if:["media_type","image"]},photo_size:{type:"dropdown",name:"Image size",show_if:["media_type","image"],options:[{id:"auto",name:"Original"},{id:"cover",name:"Fill"},{id:"contain",name:"Fit"},{id:"100% 100%",name:"Stretch"}]},video_autoplay:{type:"button_group",name:"Autoplay video",show_if:["media_type","video"],options:[{id:!0,name:"autoplay (muted)"},{id:!1,name:"no autoplay"}]},video_controls:{type:"button_group",name:"Video controls",show_if:["media_type","video"],options:[{id:!0,name:"On"},{id:!1,name:"Off"}]},video_size:{type:"dropdown",name:"Video size",show_if:["media_type","video"],options:[{id:"cover",name:"Fill"},{id:"width",name:"Fit width"},{id:"height",name:"Fit height"}]},text_background_color:{type:"color",name:"Background color",show_if:["slide_layout","text-overlay"]},text_background_opacity:{type:"number",name:"Background opacity",show_if:["slide_layout","text-overlay"]},text_background_size:{type:"dropdown",name:"Background size",show_if:["slide_layout","text-overlay"],options:[{id:"full",name:"Whole slide"},{id:"text",name:"Text"}]},text_color:{type:"color",name:"Text color",width:"half"},text_align:{type:"button_group",name:"Text align",options:[{id:"left",name:"icon::icon_align-left.svg"},{id:"center",name:"icon::icon_align-center.svg"},{id:"right",name:"icon::icon_align-right.svg"}]},photo_position:{type:"keypad",name:"Image position",show_if:["media_type","image"]},text_position:{type:"keypad",name:"Text position",width:"half"}},ke=!1,Ae=[],Se=document.querySelector("#wrapper"),Ee=function(t){if(dt(),Ae.length>1){
var e=Se.querySelector("[data-status='remove']");e.parentElement.removeChild(e),Ae.shift()}if(Ae.length>0){Se.querySelector("div[data-status='new']").dataset.status="remove",Ae[0].stopMedia()}var n=new i;Ae.push(n);var o=n.render();Se.appendChild(o),ft(),mt.editable&&(ct(t),ht(o)),_t()},Ce=function(){mt.editable&&(document.body.className="editor-view",pt()),dt(),Ee(),e(),window.onresize=function(){window.innerWidth!=ye&&(_t(),ye=window.innerWidth)}};t.state=mt,t.data=yt,t.draw=Ce,t.update=Ee}(this.template=this.template||{});
//# sourceMappingURL=template.js.map
</script><script>!function(){"use strict";var e=!1;function t(t){if(e&&window.top!==window.self){var n=window;"srcdoc"===n.location.pathname&&(n=n.parent);var o,i=(o={},window._Flourish_template_id&&(o.template_id=window._Flourish_template_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_template_id&&(o.template_id=window.Flourish.app.loaded_template_id),window._Flourish_visualisation_id&&(o.visualisation_id=window._Flourish_visualisation_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_visualisation&&(o.visualisation_id=window.Flourish.app.loaded_visualisation.id),window.Flourish&&window.Flourish.app&&window.Flourish.app.story&&(o.story_id=window.Flourish.app.story.id,o.slide_count=window.Flourish.app.story.slides.length),window.Flourish&&window.Flourish.app&&window.Flourish.app.current_slide&&(o.slide_index=window.Flourish.app.current_slide.index+1),o),r={sender:"Flourish",method:"customerAnalytics"};for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a]);for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);n.parent.postMessage(JSON.stringify(r),"*")}}function n(e){if("function"!=typeof e)throw new Error("Analytics callback is not a function");window.Flourish._analytics_listeners.push(e)}function o(){e=!0;[{event_name:"click",action_name:"click",use_capture:!0},{event_name:"keydown",action_name:"key_down",use_capture:!0},{event_name:"mouseenter",action_name:"mouse_enter",use_capture:!1},{event_name:"mouseleave",action_name:"mouse_leave",use_capture:!1}].forEach((function(e){document.body.addEventListener(e.event_name,(function(){t({action:e.action_name})}),e.use_capture)}))}
/*! @license DOMPurify 3.1.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.4/LICENSE */const{entries:i,setPrototypeOf:r,isFrozen:a,getPrototypeOf:l,getOwnPropertyDescriptor:s}=Object;let{freeze:c,seal:u,create:d}=Object,{apply:p,construct:m}="undefined"!=typeof Reflect&&Reflect;c||(c=function(e){return e}),u||(u=function(e){return e}),p||(p=function(e,t,n){return e.apply(t,n)}),m||(m=function(e,t){return new e(...t)});const f=C(Array.prototype.forEach),h=C(Array.prototype.pop),g=C(Array.prototype.push),y=C(String.prototype.toLowerCase),_=C(String.prototype.toString),w=C(String.prototype.match),v=C(String.prototype.replace),T=C(String.prototype.indexOf),A=C(String.prototype.trim),E=C(Object.prototype.hasOwnProperty),b=C(RegExp.prototype.test),S=(N=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m(N,t)});var N;function x(e){return"number"==typeof e&&isNaN(e)}function C(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return p(e,t,o)}}function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;r&&r(e,null);let o=t.length;for(;o--;){let i=t[o];if("string"==typeof i){const e=n(i);e!==i&&(a(t)||(t[o]=e),i=e)}e[i]=!0}return e}function L(e){for(let t=0;t<e.length;t++){E(e,t)||(e[t]=null)}return e}function O(e){const t=d(null);for(const[n,o]of i(e)){E(e,n)&&(Array.isArray(o)?t[n]=L(o):o&&"object"==typeof o&&o.constructor===Object?t[n]=O(o):t[n]=o)}return t}function k(e,t){for(;null!==e;){const n=s(e,t);if(n){if(n.get)return C(n.get);if("function"==typeof n.value)return C(n.value)}e=l(e)}return function(){return null}}const F=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),M=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=c(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),P=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),H=c(["#text"]),z=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),W=c(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=u(/\{\{[\w\W]*|[\w\W]*\}\}/gm),q=u(/<%[\w\W]*|[\w\W]*%>/gm),Y=u(/\${[\w\W]*}/gm),$=u(/^data-[\-\w.\u00B7-\uFFFF]/),X=u(/^aria-[\-\w]+$/),J=u(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),V=u(/^(?:\w+script|data):/i),K=u(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Z=u(/^html$/i),Q=u(/^[a-z][.\w]*(-[.\w]+)+$/i);var ee=Object.freeze({__proto__:null,MUSTACHE_EXPR:j,ERB_EXPR:q,TMPLIT_EXPR:Y,DATA_ATTR:$,ARIA_ATTR:X,IS_ALLOWED_URI:J,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:K,DOCTYPE_NAME:Z,CUSTOM_ELEMENT:Q});const te=1,ne=3,oe=7,ie=8,re=9,ae=function(){return"undefined"==typeof window?null:window},le=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var se,ce,ue=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae();const n=t=>e(t);if(n.version="3.1.4",n.removed=[],!t||!t.document||t.document.nodeType!==re)return n.isSupported=!1,n;let{document:o}=t;const r=o,a=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:s,Node:u,Element:p,NodeFilter:m,NamedNodeMap:N=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:C,DOMParser:L,trustedTypes:j}=t,q=p.prototype,Y=k(q,"cloneNode"),$=k(q,"nextSibling"),X=k(q,"childNodes"),V=k(q,"parentNode");if("function"==typeof s){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let K,Q="";const{implementation:se,createNodeIterator:ce,createDocumentFragment:ue,getElementsByTagName:de}=o,{importNode:pe}=r;let me={};n.isSupported="function"==typeof i&&"function"==typeof V&&se&&void 0!==se.createHTMLDocument;const{MUSTACHE_EXPR:fe,ERB_EXPR:he,TMPLIT_EXPR:ge,DATA_ATTR:ye,ARIA_ATTR:_e,IS_SCRIPT_OR_DATA:we,ATTR_WHITESPACE:ve,CUSTOM_ELEMENT:Te}=ee;let{IS_ALLOWED_URI:Ae}=ee,Ee=null;const be=R({},[...F,...D,...M,...U,...H]);let Se=null;const Ne=R({},[...z,...W,...B,...G]);let xe=Object.seal(d(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,Re=null,Le=!0,Oe=!0,ke=!1,Fe=!0,De=!1,Me=!0,Ie=!1,Ue=!1,Pe=!1,He=!1,ze=!1,We=!1,Be=!0,Ge=!1;const je="user-content-";let qe=!0,Ye=!1,$e={},Xe=null;const Je=R({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ve=null;const Ke=R({},["audio","video","img","source","image","track"]);let Ze=null;const Qe=R({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml";let ot=nt,it=!1,rt=null;const at=R({},[et,tt,nt],_);let lt=null;const st=["application/xhtml+xml","text/html"],ct="text/html";let ut=null,dt=null;const pt=255,mt=o.createElement("form"),ft=function(e){return e instanceof RegExp||e instanceof Function},ht=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!dt||dt!==e){if(e&&"object"==typeof e||(e={}),e=O(e),lt=-1===st.indexOf(e.PARSER_MEDIA_TYPE)?ct:e.PARSER_MEDIA_TYPE,ut="application/xhtml+xml"===lt?_:y,Ee=E(e,"ALLOWED_TAGS")?R({},e.ALLOWED_TAGS,ut):be,Se=E(e,"ALLOWED_ATTR")?R({},e.ALLOWED_ATTR,ut):Ne,rt=E(e,"ALLOWED_NAMESPACES")?R({},e.ALLOWED_NAMESPACES,_):at,Ze=E(e,"ADD_URI_SAFE_ATTR")?R(O(Qe),e.ADD_URI_SAFE_ATTR,ut):Qe,Ve=E(e,"ADD_DATA_URI_TAGS")?R(O(Ke),e.ADD_DATA_URI_TAGS,ut):Ke,Xe=E(e,"FORBID_CONTENTS")?R({},e.FORBID_CONTENTS,ut):Je,Ce=E(e,"FORBID_TAGS")?R({},e.FORBID_TAGS,ut):{},Re=E(e,"FORBID_ATTR")?R({},e.FORBID_ATTR,ut):{},$e=!!E(e,"USE_PROFILES")&&e.USE_PROFILES,Le=!1!==e.ALLOW_ARIA_ATTR,Oe=!1!==e.ALLOW_DATA_ATTR,ke=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Fe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,De=e.SAFE_FOR_TEMPLATES||!1,Me=!1!==e.SAFE_FOR_XML,Ie=e.WHOLE_DOCUMENT||!1,He=e.RETURN_DOM||!1,ze=e.RETURN_DOM_FRAGMENT||!1,We=e.RETURN_TRUSTED_TYPE||!1,Pe=e.FORCE_BODY||!1,Be=!1!==e.SANITIZE_DOM,Ge=e.SANITIZE_NAMED_PROPS||!1,qe=!1!==e.KEEP_CONTENT,Ye=e.IN_PLACE||!1,Ae=e.ALLOWED_URI_REGEXP||J,ot=e.NAMESPACE||nt,xe=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ft(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xe.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ft(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xe.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(xe.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),De&&(Oe=!1),ze&&(He=!0),$e&&(Ee=R({},H),Se=[],!0===$e.html&&(R(Ee,F),R(Se,z)),!0===$e.svg&&(R(Ee,D),R(Se,W),R(Se,G)),!0===$e.svgFilters&&(R(Ee,M),R(Se,W),R(Se,G)),!0===$e.mathMl&&(R(Ee,U),R(Se,B),R(Se,G))),e.ADD_TAGS&&(Ee===be&&(Ee=O(Ee)),R(Ee,e.ADD_TAGS,ut)),e.ADD_ATTR&&(Se===Ne&&(Se=O(Se)),R(Se,e.ADD_ATTR,ut)),e.ADD_URI_SAFE_ATTR&&R(Ze,e.ADD_URI_SAFE_ATTR,ut),e.FORBID_CONTENTS&&(Xe===Je&&(Xe=O(Xe)),R(Xe,e.FORBID_CONTENTS,ut)),qe&&(Ee["#text"]=!0),Ie&&R(Ee,["html","head","body"]),Ee.table&&(R(Ee,["tbody"]),delete Ce.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');K=e.TRUSTED_TYPES_POLICY,Q=K.createHTML("")}else void 0===K&&(K=le(j,a)),null!==K&&"string"==typeof Q&&(Q=K.createHTML(""));c&&c(e),dt=e}},gt=R({},["mi","mo","mn","ms","mtext"]),yt=R({},["foreignobject","annotation-xml"]),_t=R({},["title","style","font","a","script"]),wt=R({},[...D,...M,...I]),vt=R({},[...U,...P]),Tt=function(e){let t=V(e);t&&t.tagName||(t={namespaceURI:ot,tagName:"template"});const n=y(e.tagName),o=y(t.tagName);return!!rt[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===nt?"svg"===n:t.namespaceURI===et?"svg"===n&&("annotation-xml"===o||gt[o]):Boolean(wt[n]):e.namespaceURI===et?t.namespaceURI===nt?"math"===n:t.namespaceURI===tt?"math"===n&&yt[o]:Boolean(vt[n]):e.namespaceURI===nt?!(t.namespaceURI===tt&&!yt[o])&&(!(t.namespaceURI===et&&!gt[o])&&(!vt[n]&&(_t[n]||!wt[n]))):!("application/xhtml+xml"!==lt||!rt[e.namespaceURI]))},At=function(e){g(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Et=function(e,t){try{g(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){g(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Se[e])if(He||ze)try{At(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},bt=function(e){let t=null,n=null;if(Pe)e="<remove></remove>"+e;else{const t=w(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===lt&&ot===nt&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=K?K.createHTML(e):e;if(ot===nt)try{t=(new L).parseFromString(i,lt)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(ot,"template",null);try{t.documentElement.innerHTML=it?Q:i}catch(e){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),ot===nt?de.call(t,Ie?"html":"body")[0]:Ie?t.documentElement:r},St=function(e){return ce.call(e.ownerDocument||e,e,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},Nt=function(e){return e instanceof C&&(void 0!==e.__depth&&"number"!=typeof e.__depth||void 0!==e.__removalCount&&"number"!=typeof e.__removalCount||"string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof N)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},xt=function(e){return"function"==typeof u&&e instanceof u},Ct=function(e,t,o){me[e]&&f(me[e],(e=>{e.call(n,t,o,dt)}))},Rt=function(e){let t=null;if(Ct("beforeSanitizeElements",e,null),Nt(e))return At(e),!0;const o=ut(e.nodeName);if(Ct("uponSanitizeElement",e,{tagName:o,allowedTags:Ee}),e.hasChildNodes()&&!xt(e.firstElementChild)&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return At(e),!0;if(e.nodeType===oe)return At(e),!0;if(Me&&e.nodeType===ie&&b(/<[/\w]/g,e.data))return At(e),!0;if(!Ee[o]||Ce[o]){if(!Ce[o]&&Ot(o)){if(xe.tagNameCheck instanceof RegExp&&b(xe.tagNameCheck,o))return!1;if(xe.tagNameCheck instanceof Function&&xe.tagNameCheck(o))return!1}if(qe&&!Xe[o]){const t=V(e)||e.parentNode,n=X(e)||e.childNodes;if(n&&t){for(let o=n.length-1;o>=0;--o){const i=Y(n[o],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,$(e))}}}return At(e),!0}return e instanceof p&&!Tt(e)?(At(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!b(/<\/no(script|embed|frames)/i,e.innerHTML)?(De&&e.nodeType===ne&&(t=e.textContent,f([fe,he,ge],(e=>{t=v(t,e," ")})),e.textContent!==t&&(g(n.removed,{element:e.cloneNode()}),e.textContent=t)),Ct("afterSanitizeElements",e,null),!1):(At(e),!0)},Lt=function(e,t,n){if(Be&&("id"===t||"name"===t)&&(n in o||n in mt||"__depth"===n||"__removalCount"===n))return!1;if(Oe&&!Re[t]&&b(ye,t));else if(Le&&b(_e,t));else if(!Se[t]||Re[t]){if(!(Ot(e)&&(xe.tagNameCheck instanceof RegExp&&b(xe.tagNameCheck,e)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(e))&&(xe.attributeNameCheck instanceof RegExp&&b(xe.attributeNameCheck,t)||xe.attributeNameCheck instanceof Function&&xe.attributeNameCheck(t))||"is"===t&&xe.allowCustomizedBuiltInElements&&(xe.tagNameCheck instanceof RegExp&&b(xe.tagNameCheck,n)||xe.tagNameCheck instanceof Function&&xe.tagNameCheck(n))))return!1}else if(Ze[t]);else if(b(Ae,v(n,ve,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==T(n,"data:")||!Ve[e]){if(ke&&!b(we,v(n,ve,"")));else if(n)return!1}else;return!0},Ot=function(e){return"annotation-xml"!==e&&w(e,Te)},kt=function(e){Ct("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};let i=t.length;for(;i--;){const r=t[i],{name:a,namespaceURI:l,value:s}=r,c=ut(a);let u="value"===a?s:A(s);if(o.attrName=c,o.attrValue=u,o.keepAttr=!0,o.forceKeepAttr=void 0,Ct("uponSanitizeAttribute",e,o),u=o.attrValue,o.forceKeepAttr)continue;if(Et(a,e),!o.keepAttr)continue;if(!Fe&&b(/\/>/i,u)){Et(a,e);continue}if(Me&&b(/((--!?|])>)|<\/(style|title)/i,u)){Et(a,e);continue}De&&f([fe,he,ge],(e=>{u=v(u,e," ")}));const d=ut(e.nodeName);if(Lt(d,c,u)){if(!Ge||"id"!==c&&"name"!==c||(Et(a,e),u=je+u),K&&"object"==typeof j&&"function"==typeof j.getAttributeType)if(l);else switch(j.getAttributeType(d,c)){case"TrustedHTML":u=K.createHTML(u);break;case"TrustedScriptURL":u=K.createScriptURL(u)}try{l?e.setAttributeNS(l,a,u):e.setAttribute(a,u),Nt(e)?At(e):h(n.removed)}catch(e){}}}Ct("afterSanitizeAttributes",e,null)},Ft=function e(t){let n=null;const o=St(t);for(Ct("beforeSanitizeShadowDOM",t,null);n=o.nextNode();){if(Ct("uponSanitizeShadowNode",n,null),Rt(n))continue;const t=V(n);n.nodeType===te&&(t&&t.__depth?n.__depth=(n.__removalCount||0)+t.__depth+1:n.__depth=1),(n.__depth>=pt||n.__depth<0||x(n.__depth))&&At(n),n.content instanceof l&&(n.content.__depth=n.__depth,e(n.content)),kt(n)}Ct("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,i=null,a=null,s=null;if(it=!e,it&&(e="\x3c!--\x3e"),"string"!=typeof e&&!xt(e)){if("function"!=typeof e.toString)throw S("toString is not a function");if("string"!=typeof(e=e.toString()))throw S("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Ue||ht(t),n.removed=[],"string"==typeof e&&(Ye=!1),Ye){if(e.nodeName){const t=ut(e.nodeName);if(!Ee[t]||Ce[t])throw S("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof u)o=bt("\x3c!----\x3e"),i=o.ownerDocument.importNode(e,!0),i.nodeType===te&&"BODY"===i.nodeName||"HTML"===i.nodeName?o=i:o.appendChild(i);else{if(!He&&!De&&!Ie&&-1===e.indexOf("<"))return K&&We?K.createHTML(e):e;if(o=bt(e),!o)return He?null:We?Q:""}o&&Pe&&At(o.firstChild);const c=St(Ye?e:o);for(;a=c.nextNode();){if(Rt(a))continue;const e=V(a);a.nodeType===te&&(e&&e.__depth?a.__depth=(a.__removalCount||0)+e.__depth+1:a.__depth=1),(a.__depth>=pt||a.__depth<0||x(a.__depth))&&At(a),a.content instanceof l&&(a.content.__depth=a.__depth,Ft(a.content)),kt(a)}if(Ye)return e;if(He){if(ze)for(s=ue.call(o.ownerDocument);o.firstChild;)s.appendChild(o.firstChild);else s=o;return(Se.shadowroot||Se.shadowrootmode)&&(s=pe.call(r,s,!0)),s}let d=Ie?o.outerHTML:o.innerHTML;return Ie&&Ee["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&b(Z,o.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+d),De&&f([fe,he,ge],(e=>{d=v(d,e," ")})),K&&We?K.createHTML(d):d},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ht(e),Ue=!0},n.clearConfig=function(){dt=null,Ue=!1},n.isValidAttribute=function(e,t,n){dt||ht({});const o=ut(e),i=ut(t);return Lt(o,i,n)},n.addHook=function(e,t){"function"==typeof t&&(me[e]=me[e]||[],g(me[e],t))},n.removeHook=function(e){if(me[e])return h(me[e])},n.removeHooks=function(e){me[e]&&(me[e]=[])},n.removeAllHooks=function(){me={}},n}();function de(){if(null==se){var e=function(){var e=window.location;"about:srcdoc"==e.href&&(e=window.parent.location);var t={};return function(e,n,o){for(;o=n.exec(e);)t[decodeURIComponent(o[1])]=decodeURIComponent(o[2])}(e.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),t}();se="referrer"in e?/^https:\/\/medium.com\//.test(e.referrer):!("auto"in e)}return se}function pe(e){var t=e||window.innerWidth;return t>999?650:t>599?575:400}function me(e){if(e&&window.top!==window.self){var t=window;"srcdoc"==t.location.pathname&&(t=t.parent);var n={sender:"Flourish",method:"scrolly",captions:e.captions};t.parent.postMessage(JSON.stringify(n),"*")}}function fe(e,t){if(window.top!==window.self){var n=window;if("srcdoc"==n.location.pathname&&(n=n.parent),ce)return e=parseInt(e,10),void n.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*");var o={sender:"Flourish",context:"iframe.resize",method:"resize",height:e,src:n.location.toString()};if(t)for(var i in t)o[i]=t[i];n.parent.postMessage(JSON.stringify(o),"*")}}function he(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function ge(e){return"string"==typeof e||e instanceof String}function ye(e){return"warn"!==e.method?(console.warn("BUG: validateWarnMessage called for method"+e.method),!1):!(null!=e.message&&!ge(e.message))&&!(null!=e.explanation&&!ge(e.explanation))}function _e(e){return"resize"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!ge(e.src)&&(!!ge(e.context)&&!!("number"==typeof(t=e.height)?!isNaN(t)&&t>=0:ge(t)&&/\d/.test(t)&&/^[0-9]*(\.[0-9]*)?(cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%)?$/i.test(t)));var t}function we(e){throw new Error("Validation for setSetting is not implemented yet; see issue #4328")}function ve(e){return"scrolly"!==e.method?(console.warn("BUG: validateScrolly called for method"+e.method),!1):!!Array.isArray(e.captions)}function Te(e){return"customerAnalytics"===e.method||(console.warn("BUG: validateCustomerAnalyticsMessage called for method"+e.method),!1)}function Ae(e){return"request-upload"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!ge(e.name)&&!(null!=e.accept&&!ge(e.accept))}function Ee(e,t,n){var o=function(e){for(var t={warn:ye,resize:_e,setSetting:we,customerAnalytics:Te,"request-upload":Ae,scrolly:ve},n={},o=0;o<e.length;o++){var i=e[o];if(!t[i])throw new Error("No validator found for method "+i);n[i]=t[i]}return n}(t);window.addEventListener("message",(function(t){var i=function(){if(t.origin==document.location.origin)return!0;if(n){const e=t.origin.toLowerCase();if(n=n.toLowerCase(),e.endsWith("//"+n))return!0;if(e.endsWith("."+n))return!0}return!!t.origin.match(/\/\/localhost:\d+$|\/\/(?:public|app)\.flourish.devlocal$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$|\/\/flourish-user-templates\.com$/)}();if(null!=t.source&&i){var r;try{r="object"==typeof t.data?t.data:JSON.parse(t.data)}catch(e){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(t.data))}if("Flourish"===r.sender)if(r.method)if(Object.prototype.hasOwnProperty.call(o,r.method))if(o[r.method](r)){for(var a=document.querySelectorAll("iframe"),l=0;l<a.length;l++)if(a[l].contentWindow==t.source||a[l].contentWindow==t.source.parent)return void e(r,a[l]);console.warn("could not find frame",r)}else console.warn("Validation failed for the message",r);else console.warn("No validator implemented for message",r);else console.warn("The 'method' property was missing from message",r)}})),he()&&(window.addEventListener("resize",be),be())}function be(){for(var e=document.querySelectorAll(".flourish-embed"),t=0;t<e.length;t++){var n=e[t];if(!n.getAttribute("data-width")){var o=n.querySelector("iframe");if(o){var i=window.getComputedStyle(n),r=n.offsetWidth-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight);o.style.width=r+"px"}}}}function Se(e,t){var n=e.parentNode;if(n.classList.contains("fl-scrolly-wrapper"))console.warn("createScrolly is being called more than once per story. This should not happen.");else{n.classList.add("fl-scrolly-wrapper"),n.style.position="relative",n.style.paddingBottom="1px",n.style.transform="translate3d(0, 0, 0)",e.style.position="sticky";var o=n.getAttribute("data-height")||null;o||(o="80vh",e.style.height=o),e.style.top="calc(50vh - "+o+"/2)";var i=n.querySelector(".flourish-credit");i&&(i.style.position="sticky",i.style.top="calc(50vh + "+o+"/2)"),t.forEach((function(e,t){var o="string"==typeof e&&""!=e.trim(),i=document.createElement("div");i.setAttribute("data-slide",t),i.classList.add("fl-scrolly-caption"),i.style.position="relative",i.style.transform="translate3d(0,0,0)",i.style.textAlign="center",i.style.maxWidth="500px",i.style.height="auto",i.style.marginTop="0",i.style.marginBottom=o?"100vh":"50vh",i.style.marginLeft="auto",i.style.marginRight="auto";var r=document.createElement("div");r.innerHTML=ue.sanitize(e),r.style.visibility=o?"":"hidden",r.style.display="inline-block",r.style.paddingTop="1.25em",r.style.paddingRight="1.25em",r.style.paddingBottom="1.25em",r.style.paddingLeft="1.25em",r.style.background="rgba(255,255,255,0.9)",r.style.boxShadow="0px 0px 10px rgba(0,0,0,0.2)",r.style.borderRadius="10px",r.style.textAlign="center",r.style.maxWidth="100%",r.style.margin="0 20px",r.style.overflowX="hidden",i.appendChild(r),n.appendChild(i)})),function(e){for(var t=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting){var n=e.querySelector("iframe");n&&(n.src=n.src.replace(/#slide-.*/,"")+"#slide-"+t.target.getAttribute("data-slide"))}}))}),{rootMargin:"0px 0px -0% 0px"}),n=e.querySelectorAll(".fl-scrolly-caption"),o=0;o<n.length;o++)t.observe(n[o]);e.querySelectorAll(".fl-scrolly-caption img").forEach((function(e){e.style.maxWidth="100%"}))}(n)}}function Ne(e,t,n,o,i){var r=document.createElement("iframe");if(r.setAttribute("scrolling","no"),r.setAttribute("frameborder","0"),r.setAttribute("title","Interactive or visual content"),r.setAttribute("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),t.appendChild(r),r.offsetParent||"fixed"===getComputedStyle(r).position)xe(e,t,r,n,o,i);else{var a={embed_url:e,container:t,iframe:r,width:n,height:o,play_on_load:i};if(window._flourish_poll_items?window._flourish_poll_items.push(a):window._flourish_poll_items=[a],window._flourish_poll_items.length>1)return r;var l=setInterval((function(){window._flourish_poll_items=window._flourish_poll_items.filter((function(e){return!e.iframe.offsetParent||(xe(e.embed_url,e.container,e.iframe,e.width,e.height,e.play_on_load),!1)})),window._flourish_poll_items.length||clearInterval(l)}),500)}return r}function xe(e,t,n,o,i,r){var a;return o&&"number"==typeof o?(a=o,o+="px"):o&&o.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(a=parseFloat(o)),i&&"number"==typeof i&&(i+="px"),o?n.style.width=o:he()?n.style.width=t.offsetWidth+"px":n.style.width="100%",!!i||(e.match(/\?/)?e+="&auto=1":e+="?auto=1",i=pe(a||n.offsetWidth)+"px"),i&&("%"===i.charAt(i.length-1)&&(i=parseFloat(i)/100*t.parentNode.offsetHeight+"px"),n.style.height=i),n.setAttribute("src",e+(r?"#play-on-load":"")),n}function Ce(e){return!Array.isArray(e)&&"object"==typeof e&&null!=e}function Re(e,t){for(var n in t)Ce(e[n])&&Ce(t[n])?Re(e[n],t[n]):e[n]=t[n];return e}!function(){var e,i=window.top===window.self,r=i?null:(ce="#amp=1"==window.location.hash,{createEmbedIframe:Ne,isFixedHeight:de,getHeightForBreakpoint:pe,startEventListeners:Ee,notifyParentWindow:fe,initScrolly:me,createScrolly:Se,isSafari:he,initCustomerAnalytics:o,addAnalyticsListener:n,sendCustomerAnalyticsMessage:t}),a=!0;function l(){var t;Flourish.fixed_height||(null!=e?t=e:a&&(t=r.getHeightForBreakpoint()),t!==window.innerHeight&&r.notifyParentWindow(t))}function s(){-1!==window.location.search.indexOf("enable_customer_analytics=1")&&Flourish.enableCustomerAnalytics(),l(),window.addEventListener("resize",l)}Flourish.warn=function(e){if("string"==typeof e&&(e={message:e}),i||"editor"!==Flourish.environment)console.warn(e.message);else{var t={sender:"Flourish",method:"warn",message:e.message,explanation:e.explanation};window.parent.postMessage(JSON.stringify(t),"*")}},Flourish.uploadImage=function(e){if(i||"story_editor"!==Flourish.environment)throw"Invalid upload request";var t={sender:"Flourish",method:"request-upload",name:e.name,accept:e.accept};window.parent.postMessage(JSON.stringify(t),"*")},Flourish.setSetting=function(e,t){if("editor"===Flourish.environment||"sdk"===Flourish.environment){var n={sender:"Flourish",method:"setSetting",name:e,value:t};window.parent.postMessage(JSON.stringify(n),"*")}else if("story_editor"===Flourish.environment){var o={};o[e]=t,Re(window.template.state,function(e){var t={};for(var n in e){for(var o=t,i=n.indexOf("."),r=0;i>=0;i=n.indexOf(".",r=i+1)){var a=n.substring(r,i);a in o||(o[a]={}),o=o[a]}o[n.substring(r)]=e[n]}return t}(o))}},Flourish.setHeight=function(t){Flourish.fixed_height||(e=t,a=null==t,l())},Flourish.checkHeight=function(){if(!i){var e=Flourish.__container_height;null!=e?(Flourish.fixed_height=!0,r.notifyParentWindow(e)):r.isFixedHeight()?Flourish.fixed_height=!0:(Flourish.fixed_height=!1,l())}},Flourish.fixed_height=i||r.isFixedHeight(),Flourish.enableCustomerAnalytics=function(){r&&r.initCustomerAnalytics()},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()}()}();
//# sourceMappingURL=embedded.js.map
</script><script>
window.addEventListener("message", function(event) {

	var a = document.createElement("a");
	a.href = event.origin;
	var origin_okay = (a.hostname == window.location.hostname)
		|| window.location.hostname === "localhost"
		|| (a.hostname.match(/\.flourish\.local$/) && window.location.hostname.match(/\.flourish\.local$/))
		|| (a.hostname.match(/\.flourish\.net$/) && window.location.hostname.match(/\.flourish\.net$/))
		|| (a.hostname.match(/\.flourish\.rocks$/) && window.location.hostname.match(/\.flourish\.rocks$/))
		|| (a.hostname.match(/\.flourish-internal\.com$/) && window.location.hostname.match(/\.flourish-internal\.com$/))
		|| (a.hostname.match(/\.flourish\.studio$/) && window.location.hostname.match(/\.flourish\.studio$/))
		|| (a.hostname == "app.flourish.studio" && window.location.hostname == "flourish-user-templates.com")
		|| (a.hostname == "app.flourish.studio" && window.location.hostname == "flourish-user-preview.com")
		|| (a.hostname == "flourish-user-preview.com" && window.location.hostname == "flourish-user-templates.com")
		|| (
			(a.hostname == "public.flourish.studio" && window.location.hostname == "flo.uri.sh")
			|| (a.hostname == "public.flourish.rocks" && window.location.hostname == "staging-flo.uri.sh")
			|| (a.hostname == "public.dev.flourish.rocks" && window.location.hostname == "dev-flo.uri.sh")
		);

	if (!origin_okay) return;

	var message = event.data;
	var port = event.ports[0];
	if (!port || typeof message !== "object" || message.sender !== "Flourish") return;
	var result = null;
	function assign(target, source) {
		for (var k in source) {
			if (source.hasOwnProperty(k)) target[k] = source[k];
		}
	}
	function deepAssign(target, source, is_destructive) {
		for (var k in source) {
			if (!source.hasOwnProperty(k)) continue;
			if (
				typeof target[k] === "object" && target[k] != null && !Array.isArray(target[k])
				&& typeof source[k] === "object" && source[k] != null && !Array.isArray(source[k])
			) {
				deepAssign(target[k], source[k], is_destructive);
			}
			else target[k] = source[k];
		}
		if (is_destructive) {
			for (var k in target) {
				if (target.hasOwnProperty(k) && !source.hasOwnProperty(k)) delete target[k];
			}
		}
	}
	try {
		var i, a;
		switch(message.method) {
			case "getState":
			result = window.template.state;
			if (message.argument) for (a = message.argument.split("."), i = 0; i < a.length; i++) {
				result = result[a[i]];
			}
			break;

			case "setState":
			deepAssign(window.template.state, message.argument);
			break;

			case "hasData":
			result = !!window.template.data;
			break;

			case "setData":
			assign(window.template.data, message.argument);
			break;

			case "getData":
			result = window.template.data;
			break;

			case "draw":
			window.template.draw();
			break;

			case "update":
			window.template.update();
			break;

			case "snapshot":
			result = window.snapshot(message.argument, port);
			break;

			case "setFixedHeight":
			if (window.Flourish) {
				window.Flourish.fixed_height = message.argument != null;
				window.Flourish.__container_height = message.argument;
				if (window.Flourish.checkHeight) window.Flourish.checkHeight();
			}
			break;

			case "sync":
			var spec = message.argument;
			if (spec.data) {
				assign(window.template.data, spec.data);
			}
			if (spec.state) {
				deepAssign(window.template.state, spec.state, spec.overwrite_state);
			}
			// only allow draw or update, not both
			if (spec.draw) {
				window.template.draw();
			}
			else if (spec.update) {
				window.template.update();
			}
			result = "success";
			break;
		}

		port.postMessage({result: result});
	}
	catch (e) {
		port.postMessage({error: e.message});
		throw e;
	}
}, false);
</script></body></html>